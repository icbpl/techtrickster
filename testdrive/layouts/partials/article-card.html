
{{ $article := .article }}
{{ $variant := default "default" .variant }}
{{ $class := default "" .class }}

<article class="article-card rounded-lg overflow-hidden border border-border bg-card {{ if eq $variant "featured" }}grid md:grid-cols-2 gap-4{{ else }}flex flex-col{{ end }} {{ if eq $variant "compact" }}flex-row items-center gap-4{{ end }} {{ $class }}">
  <!-- Article Image -->
  <a 
    href="{{ $article.Permalink }}" 
    class="article-image block overflow-hidden {{ if eq $variant "featured" }}h-full{{ else if eq $variant "compact" }}flex-shrink-0 w-24 h-24{{ else }}aspect-video{{ end }} {{ if eq $variant "compact" }}rounded-md{{ end }}"
    aria-label="{{ $article.Title }}"
  >
    <img 
      src="{{ with $article.Params.cover }}{{ . }}{{ else }}/placeholder.svg{{ end }}" 
      alt="{{ $article.Title }}" 
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </a>
  
  <!-- Article Content -->
  <div class="flex flex-col {{ if eq $variant "featured" }}p-6{{ else if eq $variant "compact" }}p-0{{ else }}p-4{{ end }} {{ if eq $variant "featured" }}justify-center{{ end }}">
    <!-- Category Badge -->
    {{ with $article.Params.category }}
    <a 
      href="/category/{{ . | urlize }}"
      class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-secondary text-secondary-foreground inline-block w-fit mb-2"
    >
      {{ . }}
    </a>
    {{ end }}
    
    <!-- Title -->
    <h3 class="font-semibold line-clamp-2 text-balance {{ if eq $variant "featured" }}text-2xl mb-3{{ else if eq $variant "compact" }}text-base mb-1{{ else }}text-lg mb-2{{ end }}">
      <a 
        href="{{ $article.Permalink }}" 
        class="hover:text-primary/90 transition-colors"
      >
        {{ $article.Title }}
      </a>
    </h3>
    
    <!-- Excerpt - Hide in compact variant -->
    {{ if ne $variant "compact" }}
    <p class="text-muted-foreground text-sm line-clamp-2 mb-3">
      {{ with $article.Params.excerpt }}{{ . }}{{ else }}{{ $article.Summary }}{{ end }}
    </p>
    {{ end }}
    
    <!-- Metadata -->
    <div class="flex items-center gap-3 text-xs text-muted-foreground mt-auto">
      <span class="flex items-center gap-1">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-3">
          <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
          <line x1="16" x2="16" y1="2" y2="6"/>
          <line x1="8" x2="8" y1="2" y2="6"/>
          <line x1="3" x2="21" y1="10" y2="10"/>
        </svg>
        {{ $article.Date.Format "Jan 2, 2006" }}
      </span>
      <span class="flex items-center gap-1">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-3">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        {{ math.Round (div (countwords $article.Content) 200.0) }} min read
      </span>
    </div>
  </div>
</article>
